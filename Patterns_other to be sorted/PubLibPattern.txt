PubLibPattern

import theEccentricTrader/PubLibPattern/4


// This source code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© theEccentricTrader
//@version=6

// @description pattern conditions for indicator and strategy development
library('PubLibPattern')

/////////////
// IMPORTS //
/////////////

import theEccentricTrader/PubLibSwing/3 as sw
import theEccentricTrader/PubLibTrend/3 as tr

///////////////////////////
// CONDITIONAL VARIABLES //
///////////////////////////

shp_0 = sw.shp(0)
shp_1 = sw.shp(1)
shp_2 = sw.shp(2)

slp_0 = sw.slp(0)
slp_1 = sw.slp(1)
slp_2 = sw.slp(2)

shrr_0 = sw.shrr(0)
shrr_1 = sw.shrr(1)
shrr_2 = sw.shrr(2)

slrr_0 = sw.slrr(0)
slrr_1 = sw.slrr(1)
slrr_2 = sw.slrr(2)

rlut = tr.rlut()
dt = tr.dt()
ut = tr.ut()
rldt = tr.rldt()

dut = tr.dut()
ddt = tr.ddt()

dt_1p = tr.dt_1p()
ut_1p = tr.ut_1p()

ddt_3p = tr.ddt_3p()
dut_3p = tr.dut_3p()

////////////////////
// CHART PATTERNS //
////////////////////

// @function ascending broadening pattern condition
// @returns bool
export asc_broadening() =>
    dut and shp_0 - shp_1 > slp_0 - slp_1

// @function broadening pattern condition
// @returns bool
export broadening() =>
    rlut and rldt

// @function descending broadening pattern condition
// @returns bool
export desc_broadening() =>
    ddt and shp_1 - shp_0 < slp_1 - slp_0

// @function double bottom pattern condition
// @param simple float
// @returns bool
export double_bot(simple float low_tol, simple float up_tol) =>
    slrr_0 >= 100 - low_tol and slrr_0 <= 100 + up_tol

// @function double top pattern condition
// @param simple float
// @returns bool
export double_top(simple float low_tol, simple float up_tol) =>
    shrr_0 >= 100 - low_tol and shrr_0 <= 100 + up_tol

// @function triple bottom pattern condition
// @param simple float
// @returns bool
export triple_bot(simple float low_tol, simple float up_tol) =>
    slrr_0 >= 100 - low_tol and slrr_0 <= 100 + up_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 >= 100 - low_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 <= 100 + up_tol

// @function triple top pattern condition
// @param simple float
// @returns bool
export triple_top(simple float low_tol, simple float up_tol) =>
    shrr_0 >= 100 - low_tol and shrr_0 <= 100 + up_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 >= 100 - low_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 <= 100 + up_tol

// @function bearish elliot wave pattern condition
// @returns bool
export bear_elliot() =>
    dt_1p and dut_3p[1]

// @function bullish elliot wave pattern condition
// @returns bool
export bull_elliot() =>
    ut_1p and ddt_3p[1]

// @function bearish alternate flag pattern condition
// @param simple float
// @returns bool
export bear_alt_flag(simple float ab_ratio, simple float bc_ratio) =>
    dt and slrr_0 >= ab_ratio and shrr_0 <= bc_ratio

// @function bullish alternate flag pattern condition
// @param simple float
// @returns bool
export bull_alt_flag(simple float ab_ratio, simple float bc_ratio) =>
    ut and shrr_0 >= ab_ratio and slrr_0 <= bc_ratio

// @function bearish flag pattern condition
// @param simple float
// @returns bool
export bear_flag(simple float ab_ratio, simple float bc_ratio, simple float be_ratio) =>
    rlut and ut and dt[1] and slrr_1 >= ab_ratio and shrr_1 <= bc_ratio and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 <= be_ratio

// @function bullish flag pattern condition
// @param simple float
// @returns bool
export bull_flag(simple float ab_ratio, simple float bc_ratio, simple float be_ratio) =>
    dt and rldt and ut[1] and shrr_1 >= ab_ratio and slrr_1 <= bc_ratio and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 <= be_ratio

// @function bearish ascending head and shoulders pattern condition
// @returns bool
export bear_asc_head_shoulders() =>
    dt and ut and rlut[1] and shp_0 > shp_2

// @function bullish ascending head and shoulders pattern condition
// @returns bool
export bull_asc_head_shoulders() =>
    ut and rlut and rldt[1] and slp_0 > slp_2

// @function bearish descending head and shoulders pattern condition
// @returns bool
export bear_desc_head_shoulders() =>
    dt and rldt and rlut[1] and shp_0 < shp_2

// @function bullish descending head and shoulders pattern condition
// @returns bool
export bull_desc_head_shoulders() =>
    ut and dt and rldt[1] and slp_0 < slp_2

// @function bearish head and shoulders pattern condition
// @returns bool
export bear_head_shoulders() =>
    dt and rlut[1]

// @function bullish head and shoulders pattern condition
// @returns bool
export bull_head_shoulders() =>
    ut and rldt[1]

// @function bearish pennant pattern condition
// @param simple float
// @returns bool
export bear_pennant(simple float ab_ratio, simple float bc_ratio) =>
    dt and dt[1] and ut and slrr_1 >= ab_ratio and shrr_1 <= bc_ratio

// @function bullish pennant pattern condition
// @param simple float
// @returns bool
export bull_pennant(simple float ab_ratio, simple float bc_ratio) =>
    dt and ut and ut[1] and shrr_1 >= ab_ratio and slrr_1 <= bc_ratio

// @function ascending wedge pattern condition
// @returns bool
export asc_wedge() =>
    dut and shp_0 - shp_1 < slp_0 - slp_1

// @function descending wedge pattern condition
// @returns bool
export desc_wedge() =>
    ddt and shp_1 - shp_0 > slp_1 - slp_0

// @function wedge pattern condition
// @returns bool
export wedge() =>
    dt and ut

///////////////////////
// HARMONIC PATTERNS //
///////////////////////

// @function bearish 5-0 harmonic pattern condition
// @param simple float
// @returns bool
export bear_5_0(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol) =>
    dt and rldt and rlut[1] and shrr_1 >= 113 - ab_low_tol and shrr_1 <= 161.8 + ab_up_tol and slrr_0 >= 161.8 - bc_low_tol and slrr_0 <= 224 + bc_up_tol and shrr_0 >= 50.0 - cd_low_tol and shrr_0 <= 50.0 + cd_up_tol

// @function bullish 5-0 harmonic pattern condition
// @param simple float
// @returns bool
export bull_5_0(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol) =>
    rlut and ut and rldt[1] and slrr_1 >= 113 - ab_low_tol and slrr_1 <= 161.8 + ab_up_tol and shrr_0 >= 161.8 - bc_low_tol and shrr_0 <= 224 + bc_up_tol and slrr_0 >= 50.0 - cd_low_tol and slrr_0 <= 50.0 + cd_up_tol

// @function bearish abcd harmonic pattern condition
// @param simple float
// @returns bool
export bear_abcd(simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol) =>
    rlut and ut and slrr_0 >= 61.8 - bc_low_tol and slrr_0 <= 78.6 + bc_up_tol and shrr_0 >= 127.2 - cd_low_tol and shrr_0 <= 161.8 + cd_up_tol

// @function bullish abcd harmonic pattern condition
// @param simple float
// @returns bool
export bull_abcd(simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol) =>
    dt and rldt and shrr_0 >= 61.8 - bc_low_tol and shrr_0 <= 78.6 + bc_up_tol and slrr_0 >= 127.2 - cd_low_tol and slrr_0 <= 161.8 + cd_up_tol

// @function bearish alternate bat harmonic pattern condition
// @param simple float
// @returns bool
export bear_alt_bat(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float ad_low_tol, simple float ad_up_tol) =>
    rlut and ut and dt[1] and shrr_1 >= 38.2 - ab_low_tol and shrr_1 <= 38.2 + ab_up_tol and slrr_0 >= 38.2 - bc_low_tol and slrr_0 <= 88.6 + bc_up_tol and shrr_0 >= 200 - cd_low_tol and shrr_0 <= 361.8 + cd_up_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 >= 113 - ad_low_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 <= 113 + ad_up_tol

// @function bullish alternate bat harmonic pattern condition
// @param simple float
// @returns bool
export bull_alt_bat(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float ad_low_tol, simple float ad_up_tol) =>
    dt and rldt and ut[1] and slrr_1 >= 38.2 - ab_low_tol and slrr_1 <= 38.2 + ab_up_tol and shrr_0 >= 38.2 - bc_low_tol and shrr_0 <= 88.6 + bc_up_tol and slrr_0 >= 200 - cd_low_tol and slrr_0 <= 361.8 + cd_up_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 >= 113 - ad_low_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 <= 113 + ad_up_tol

// @function bearish bat harmonic pattern condition
// @param simple float
// @returns bool
export bear_bat(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float ad_low_tol, simple float ad_up_tol) =>
    rlut and ut and dt[1] and shrr_1 >= 38.2 - ab_low_tol and shrr_1 <= 50.0 + ab_up_tol and slrr_0 >= 38.2 - bc_low_tol and slrr_0 <= 88.6 + bc_up_tol and shrr_0 >= 161.8 - cd_low_tol and shrr_0 <= 261.8 + cd_up_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 >= 88.6 - ad_low_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 <= 88.6 + ad_up_tol

// @function bullish bat harmonic pattern condition
// @param simple float
// @returns bool
export bull_bat(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float ad_low_tol, simple float ad_up_tol) =>
    dt and rldt and ut[1] and slrr_1 >= 38.2 - ab_low_tol and slrr_1 <= 50.0 + ab_up_tol and shrr_0 >= 38.2 - bc_low_tol and shrr_0 <= 88.6 + bc_up_tol and slrr_0 >= 161.8 - cd_low_tol and slrr_0 <= 261.8 + cd_up_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 >= 88.6 - ad_low_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 <= 88.6 + ad_up_tol

// @function bearish butterfly harmonic pattern condition
// @param simple float
// @returns bool
export bear_butterfly(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float ad_low_tol, simple float ad_up_tol) =>
    rlut and ut and dt[1] and shrr_1 >= 78.6 - ab_low_tol and shrr_1 <= 78.6 + ab_up_tol and slrr_0 >= 38.2 - bc_low_tol and slrr_0 <= 88.6 + bc_up_tol and shrr_0 >= 161.8 - cd_low_tol and shrr_0 <= 261.8 + cd_up_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 >= 127.0 - ad_low_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 <= 127.0 + ad_up_tol

// @function bullish butterfly harmonic pattern condition
// @param simple float
// @returns bool
export bull_butterfly(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float ad_low_tol, simple float ad_up_tol) =>
    dt and rldt and ut[1] and slrr_1 >= 78.6 - ab_low_tol and slrr_1 <= 78.6 + ab_up_tol and shrr_0 >= 38.2 - bc_low_tol and shrr_0 <= 88.6 + bc_up_tol and slrr_0 >= 161.8 - cd_low_tol and slrr_0 <= 261.8 + cd_up_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 >= 127.0 - ad_low_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 <= 127.0 + ad_up_tol

// @function bearish cassiopeia a harmonic pattern condition
// @param simple float
// @returns bool
export bear_cassiopeia_a(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol) =>
    dt and dt[1] and rldt and shrr_1 >= 11.34 - ab_low_tol and shrr_1 <= 22.31 + ab_up_tol and slrr_0 >= 225.7 - bc_low_tol and slrr_0 <= 341 + bc_up_tol and shrr_0 >= 77.69 - cd_low_tol and shrr_0 <= 88.66 + cd_up_tol

// @function bullish cassiopeia a harmonic pattern condition
// @param simple float
// @returns bool
export bull_cassiopeia_a(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol) =>
    ut and ut[1] and rlut and slrr_1 >= 11.34 - ab_low_tol and slrr_1 <= 22.31 + ab_up_tol and shrr_0 >= 225.7 - bc_low_tol and shrr_0 <= 341 + bc_up_tol and slrr_0 >= 77.69 - cd_low_tol and slrr_0 <= 88.66 + cd_up_tol

// @function bearish cassiopeia b harmonic pattern condition
// @param simple float
// @returns bool
export bear_cassiopeia_b(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol) =>
    ut and rlut and rlut[1] and shrr_1 >= 111.34 - ab_low_tol and shrr_1 <= 122.31 + ab_up_tol and slrr_0 >= 77.69 - bc_low_tol and slrr_0 <= 88.66 + bc_up_tol and shrr_0 >= 225.7 - cd_low_tol and shrr_0 <= 341 + cd_up_tol

// @function bullish cassiopeia b harmonic pattern condition
// @param simple float
// @returns bool
export bull_cassiopeia_b(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol) =>
    dt and rldt and rldt[1] and slrr_1 >= 111.34 - ab_low_tol and slrr_1 <= 122.31 + ab_up_tol and shrr_0 >= 77.69 - bc_low_tol and shrr_0 <= 88.66 + bc_up_tol and slrr_0 >= 225.7 - cd_low_tol and slrr_0 <= 341 + cd_up_tol

// @function bearish cassiopeia c harmonic pattern condition
// @param simple float
// @returns bool
export bear_cassiopeia_c(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol) =>
    dt[1] and rlut and rldt and shrr_1 >= 77.69 - ab_low_tol and shrr_1 <= 88.66 + ab_up_tol and slrr_0 >= 111.34 - bc_low_tol and slrr_0 <= 122.31 + bc_up_tol and shrr_0 >= 225.7 - cd_low_tol and shrr_0 <= 341 + cd_up_tol

// @function bullish cassiopeia c harmonic pattern condition
// @param simple float
// @returns bool
export bull_cassiopeia_c(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol) =>
    rlut and rldt and ut[1] and slrr_1 >= 77.69 - ab_low_tol and slrr_1 <= 88.66 + ab_up_tol and shrr_0 >= 111.34 - bc_low_tol and shrr_0 <= 122.31 + bc_up_tol and slrr_0 >= 225.7 - cd_low_tol and slrr_0 <= 341 + cd_up_tol

// @function bearish crab harmonic pattern condition
// @param simple float
// @returns bool
export bear_crab(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float ad_low_tol, simple float ad_up_tol) =>
    rlut and ut and dt[1] and shrr_1 >= 38.2 - ab_low_tol and shrr_1 <= 61.8 + ab_up_tol and slrr_0 >= 38.2 - bc_low_tol and slrr_0 <= 88.6 + bc_up_tol and shrr_0 >= 261.8 - cd_low_tol and shrr_0 <= 361.8 + cd_up_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 >= 161.8 - ad_low_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 <= 161.8 + ad_up_tol

// @function bullish crab harmonic pattern condition
// @param simple float
// @returns bool
export bull_crab(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float ad_low_tol, simple float ad_up_tol) =>
    dt and rldt and ut[1] and slrr_1 >= 38.2 - ab_low_tol and slrr_1 <= 61.8 + ab_up_tol and shrr_0 >= 38.2 - bc_low_tol and shrr_0 <= 88.6 + bc_up_tol and slrr_0 >= 261.8 - cd_low_tol and slrr_0 <= 361.8 + cd_up_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 >= 161.8 - ad_low_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 <= 161.8 + ad_up_tol

// @function bearish deep crab harmonic pattern condition
// @param simple float
// @returns bool
export bear_deep_crab(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float ad_low_tol, simple float ad_up_tol) =>
    rlut and ut and dt[1] and shrr_1 >= 88.6 - ab_low_tol and shrr_1 <= 88.6 + ab_up_tol and slrr_0 >= 38.2 - bc_low_tol and slrr_0 <= 88.6 + bc_up_tol and shrr_0 >= 200 - cd_low_tol and shrr_0 <= 361.8 + cd_up_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 >= 161.8 - ad_low_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 <= 161.8 + ad_up_tol

// @function bullish deep crab harmonic pattern condition
// @param simple float
// @returns bool
export bull_deep_crab(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float ad_low_tol, simple float ad_up_tol) =>
    dt and rldt and ut[1] and slrr_1 >= 88.6 - ab_low_tol and slrr_1 <= 88.6 + ab_up_tol and shrr_0 >= 38.2 - bc_low_tol and shrr_0 <= 88.6 + bc_up_tol and slrr_0 >= 200 - cd_low_tol and slrr_0 <= 361.8 + cd_up_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 >= 161.8 - ad_low_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 <= 161.8 + ad_up_tol

// @function bearish cypher harmonic pattern condition
// @param simple float
// @returns bool
export bear_cypher(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float xc_low_tol, simple float xc_up_tol) =>
    rlut and rldt and dt[1] and shrr_1 >= 38.2 - ab_low_tol and shrr_1 <= 61.8 + ab_up_tol and slrr_0 >= 113 - bc_low_tol and slrr_0 <= 141.4 + bc_up_tol and shrr_0 >= 127.2 - cd_low_tol and shrr_0 <= 200 + cd_up_tol and (shp_0 - slp_0) / (shp_2 - slp_0) * 100 >= 78.6 - xc_low_tol and (shp_0 - slp_0) / (shp_2 - slp_0) * 100 <= 78.6 + xc_up_tol

// @function bullish cypher harmonic pattern condition
// @param simple float
// @returns bool
export bull_cypher(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float xc_low_tol, simple float xc_up_tol) =>
    rlut and rldt and ut[1] and slrr_1 >= 38.2 - ab_low_tol and slrr_1 <= 61.8 + ab_up_tol and shrr_0 >= 113 - bc_low_tol and shrr_0 <= 141.4 + bc_up_tol and slrr_0 >= 127.2 - cd_low_tol and slrr_0 <= 200 + cd_up_tol and (shp_0 - slp_0) / (shp_0 - slp_2) * 100 >= 78.6 - xc_low_tol and (shp_0 - slp_0) / (shp_0 - slp_2) * 100 <= 78.6 + xc_up_tol

// @function bearish gartley harmonic pattern condition
// @param simple float
// @returns bool
export bear_gartley(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float ad_low_tol, simple float ad_up_tol) =>
    rlut and ut and dt[1] and shrr_1 >= 61.8 - ab_low_tol and shrr_1 <= 61.8 + ab_up_tol and slrr_0 >= 38.2 - bc_low_tol and slrr_0 <= 88.6 + bc_up_tol and shrr_0 >= 127.2 - cd_low_tol and shrr_0 <= 161.8 + cd_up_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 >= 78.6 - ad_low_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 <= 78.6 + ad_up_tol

// @function bullish gartley harmonic pattern condition
// @param simple float
// @returns bool
export bull_gartley(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float cd_low_tol, simple float cd_up_tol, simple float ad_low_tol, simple float ad_up_tol) =>
    dt and rldt and ut[1] and slrr_1 >= 61.8 - ab_low_tol and slrr_1 <= 61.8 + ab_up_tol and shrr_0 >= 38.2 - bc_low_tol and shrr_0 <= 88.6 + bc_up_tol and slrr_0 >= 127.2 - cd_low_tol and slrr_0 <= 161.8 + cd_up_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 >= 78.6 - ad_low_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 <= 78.6 + ad_up_tol

// @function bearish shark harmonic pattern condition
// @param simple float
// @returns bool
export bear_shark(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float xc_low_tol, simple float xc_up_tol) =>
    rlut and rldt and dt[1] and slrr_0 >= 113 - ab_low_tol and slrr_0 <= 161.8 + ab_up_tol and shrr_0 >= 161.8 - bc_low_tol and shrr_0 <= 224 + bc_up_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 >= 88.6 - xc_low_tol and (shp_0 - slp_1) / (shp_2 - slp_1) * 100 <= 113 + xc_up_tol

// @function bullish shark harmonic pattern condition
// @param simple float
// @returns bool
export bull_shark(simple float ab_low_tol, simple float ab_up_tol, simple float bc_low_tol, simple float bc_up_tol, simple float xc_low_tol, simple float xc_up_tol) =>
    rlut and rldt and ut[1] and shrr_0 >= 113 - ab_low_tol and shrr_0 <= 161.8 + ab_up_tol and slrr_0 >= 161.8 - bc_low_tol and slrr_0 <= 224 + bc_up_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 >= 88.6 - xc_low_tol and (shp_1 - slp_0) / (shp_1 - slp_2) * 100 <= 113 + xc_up_tol

// @function bearish three drive harmonic pattern condition
// @param simple float
// @returns bool
export bear_three_drive(simple float x1_low_tol, simple float a1_low_tol, simple float a1_up_tol, simple float a2_low_tol, simple float a2_up_tol, simple float b2_low_tol, simple float b2_up_tol, simple float b3_low_tol, simple float b3_upt_tol) =>
    rlut and dut and dut[1] and shrr_2 >= 127.2 - x1_low_tol and slrr_1 >= 61.8 - a1_low_tol and slrr_1 <= 61.8 + a1_up_tol and shrr_1 >= 127.2 - a2_low_tol and shrr_1 <= 161.8 + a2_up_tol and slrr_0 >= 61.8 - b2_low_tol and slrr_0 <= 61.8 + b2_up_tol and shrr_0 >= 127.2 - b3_low_tol and shrr_0 <= 161.8 + b3_upt_tol

// @function bullish three drive harmonic pattern condition
// @param simple float
// @returns bool
export bull_three_drive(simple float x1_low_tol, simple float a1_low_tol, simple float a1_up_tol, simple float a2_low_tol, simple float a2_up_tol, simple float b2_low_tol, simple float b2_up_tol, simple float b3_low_tol, simple float b3_upt_tol) =>
    rldt and ddt and ddt[1] and slrr_2 >= 127.2 - x1_low_tol and shrr_1 >= 61.8 - a1_low_tol and shrr_1 <= 61.8 + a1_up_tol and slrr_1 >= 127.2 - a2_low_tol and slrr_1 <= 161.8 + a2_up_tol and shrr_0 >= 61.8 - b2_low_tol and shrr_0 <= 61.8 + b2_up_tol and slrr_0 >= 127.2 - b3_low_tol and slrr_0 <= 161.8 + b3_upt_tol

